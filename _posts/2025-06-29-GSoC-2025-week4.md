---
layout: post
title: "GSoC 2025 - Week 4 - First Patch to Gerrit"
date: 2025-06-29 00:00:00 +0530
categories: [GSoC]
tags: [Yocto, AGL, RaspberryPI, GSoC, LFX, LF]
description: "Pushing a Draft to the Community"
author: danascape
toc: true
---

In the previous week, I was confident that I could begin integrating the ROS feature into AGL environment. We had already decided that we needed to work with ROS2 Humble.
This week, my focus shifted toward preparing the integration process and pushing my first patch to the community.

To kickstart the integration of ROS2 into AGL, I began by exploring how other features were integrated into the system. Since weâ€™re in the development phase and ROS2 is not an active feature in AGL yet, I opted to add the necessary components inside the `meta-agl-devel` layer. 

Here are the key steps I followed for integration:

* **Creating a layer template for agl-ros2 feature (meta-agl-ros2/conf/layer.conf)**

```bash
# We have a conf and classes directory, add to BBPATH
BBPATH =. "${LAYERDIR}:"

# We have recipes-* directories, add to BBFILES
BBFILES += "${LAYERDIR}/recipes-*/*/*.bb \
            ${LAYERDIR}/recipes-*/*/*.bbappend"

BBFILE_COLLECTIONS += "aglros2"

BBFILE_PATTERN_aglros2 = "^${LAYERDIR}/"
BBFILE_PRIORITY_aglros2 = "70"

LAYERSERIES_COMPAT_aglros2 = "scarthgap"
```

* **Creating a bblayer to add layer dependencies when called (templates/feature/agl-ros2/50_bblayers.conf.inc)**

```bash
BBLAYERS =+ " \
   ${METADIR}/meta-agl-devel/meta-agl-ros2 \
   ${METADIR}/external/meta-ros/meta-ros-common \
   ${METADIR}/external/meta-ros/meta-ros2 \
   ${METADIR}/external/meta-ros/meta-ros2-humble \
"
```

* **A feature description or README (templates/feature/agl-ros2/README_feature_agl-ros2.md)**

```bash
---
description: Feature agl-ros2
authors: Saalim Quadri <saalimquadri2@gmail.com>
---

### Feature agl-ros2
```

### Patchset Submission

Once the integration steps were completed, I proceeded to prepare my first patchset. I pushed the patch to Gerrit for review, where it can be further evaluated by the community and maintainers. You can find the patchset here:

My first patchset is [First Patchset to Gerrit][patchset]

[patchset]: https://gerrit.automotivelinux.org/gerrit/c/AGL/meta-agl-devel/+/31100/1