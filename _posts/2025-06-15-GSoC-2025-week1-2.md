---
layout: post
title: "GSoC 2025 - Week 1,2 - Setting Up the Build"
date: 2025-06-15 00:00:00 +0530
categories: [GSoC]
tags: [Yocto, AGL, RaspberryPI, GSoC, LFX, LF]
description: "Firing up a powerful PC to compile Yocto ;)"
author: danascape
toc: true
---

## Environment Setup
Having experience working with the [Android Open Source Project][aosp] and the [Linux Kernel][kernel] proved beneficial as it made managing larger sources more straightforward. Surfing and downloading sources was easier for me, though I understand it might be different for others.

To streamline the process, I procured a powerful PC, knowing that AOSP can take over two hours to compile. Patience, honed through previous experience, helped me tackle these challenges with ease.

## Technical Environment Setup

### Development System Specifications

My primary development environment:
* **Hardware**: Ryzen 7 7700X, 32GB RAM, 4TB SSD
* **Primary OS**: Ubuntu LTS 22.04
* **Secondary OS**: Windows 11

### AGL and meta-ros version Selection
After extensive discussion with my mentors, we decided on:
* **AGL Release**: Super Salmon (latest stable at project start)
* **meta-ros Layer**: Scarthgap branch (compatible with AGL's OE version)
* **Target ROS Distribution**: ROS2 Humble

This combination provides the best balance of stability and feature completeness for automotive applications.

### Building Initial Images

Setting up the build environment was more complex than I anticipitated:

* **AGL Setup**
```bash
mkdir agl-gsoc && cd agl-gsoc
repo init -u https://gerrit.automotivelinux.org/gerrit/AGL/AGL-repo
repo sync
```
```bash
source meta-agl/scripts/aglsetup.sh -f -m raspberrypi4 -b raspberrypi4 agl-flutter agl-devel agl-demo
bitbake agl-ivi-demo-flutter
```
You can find more details on dependencies [here][agl-deps].

* **ROS Layer build**
```bash
mkdir ros-gsoc && cd ros-gsoc
git clone -b build https://github.com/ros/meta-ros
mkdir ros-out
KAS_WORK_DIR=ros-out
kas build meta-ros/kas/oeros-kirkstone-humble-raspberrypi4-64.yml
```
For more instructions, check the [kas README][ros-deps].

I initially chose to build both the AGL and ROS layers independently on my machine. However, this process took much longer than expected. While I had many of the necessary dependencies already installed, I encountered numerous errors. These issues were particularly perplexing to my mentors, as they seemed related to conflicting dependencies from my previous Android [cuttlefish][cuttlefish] setup, which caused errors I hadn't anticipated.

[aosp]: https://source.android.com/
[kernel]: https://kernel.org/
[agl-deps]: https://docs.automotivelinux.org/en/salmon/#01_Getting_Started/02_Building_AGL_Image/02_Preparing_Your_Build_Host/
[ros-deps]: https://github.com/ros/meta-ros/blob/build/kas/README.md
[cuttlefish]: https://source.android.com/docs/devices/cuttlefish