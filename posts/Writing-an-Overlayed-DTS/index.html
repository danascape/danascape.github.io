<!doctype html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.4.1" /><meta property="og:title" content="Writing an Overlayed DTS" /><meta name="author" content="Saalim Quadri" /><meta property="og:locale" content="en" /><meta name="description" content="Overlayed device trees are written in order to avoid changing the base device tree structures already present in the kernel source, and just get them overridden during compilation. Learn how to create them!" /><meta property="og:description" content="Overlayed device trees are written in order to avoid changing the base device tree structures already present in the kernel source, and just get them overridden during compilation. Learn how to create them!" /><link rel="canonical" href="https://danascape.github.io/posts/Writing-an-Overlayed-DTS/" /><meta property="og:url" content="https://danascape.github.io/posts/Writing-an-Overlayed-DTS/" /><meta property="og:site_name" content="squadri" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-09-21T00:00:00+05:30" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Writing an Overlayed DTS" /><meta name="twitter:site" content="@danascape" /><meta name="twitter:creator" content="@danascape" /><meta name="google-site-verification" content="G-WDDV94BTDD" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Saalim Quadri","url":"https://x.com/danascape"},"dateModified":"2021-09-21T00:00:00+05:30","datePublished":"2021-09-21T00:00:00+05:30","description":"Overlayed device trees are written in order to avoid changing the base device tree structures already present in the kernel source, and just get them overridden during compilation. Learn how to create them!","headline":"Writing an Overlayed DTS","mainEntityOfPage":{"@type":"WebPage","@id":"https://danascape.github.io/posts/Writing-an-Overlayed-DTS/"},"url":"https://danascape.github.io/posts/Writing-an-Overlayed-DTS/"}</script><title>Writing an Overlayed DTS | squadri</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="squadri"><meta name="application-name" content="squadri"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.32.2/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox@3.3.0/dist/css/glightbox.min.css"> <script src="/assets/js/dist/theme.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/glightbox@3.3.0/dist/js/glightbox.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.13/dayjs.min.js,npm/dayjs@1.11.13/locale/en.js,npm/dayjs@1.11.13/plugin/relativeTime.js,npm/dayjs@1.11.13/plugin/localizedFormat.js,npm/tocbot@4.32.2/dist/tocbot.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.min.js?baseurl=&register=true" ></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-WDDV94BTDD"></script> <script> document.addEventListener('DOMContentLoaded', () => { window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'G-WDDV94BTDD'); }); </script> <script src="/assets/js/pwa-popup.js" defer></script><body><aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end"><header class="profile-wrapper"> <a href="/" id="avatar" class="rounded-circle"><img src="/assets/images/my-avatar.png" width="112" height="112" alt="avatar" onerror="this.style.display='none'"></a> <a class="site-title d-block" href="/">squadri</a><p class="site-subtitle fst-italic mb-0">Kernels and AOSP.</p></header><nav class="flex-column flex-grow-1 w-100 ps-0"><ul class="nav"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle"></i> <span>ABOUT</span> </a></ul></nav><div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <button type="button" class="btn btn-link nav-link" aria-label="Switch Mode" id="mode-toggle"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/danascape" aria-label="github" target="_blank" rel="noopener noreferrer" > <i class="fab fa-github"></i> </a> <a href="https://twitter.com/danascape" aria-label="twitter" target="_blank" rel="noopener noreferrer" > <i class="fa-brands fa-x-twitter"></i> </a> <a href="javascript:location.href = 'mailto:' + ['saalim.priv','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></aside><div id="main-wrapper" class="d-flex justify-content-center"><div class="container d-flex flex-column px-xxl-5"><header id="topbar-wrapper" class="flex-shrink-0" aria-label="Top Bar"><div id="topbar" class="d-flex align-items-center justify-content-between px-lg-3 h-100" ><nav id="breadcrumb" aria-label="Breadcrumb"> <span> <a href="/">Home</a> </span> <span>Writing an Overlayed DTS</span></nav><button type="button" id="sidebar-trigger" class="btn btn-link" aria-label="Sidebar"> <i class="fas fa-bars fa-fw"></i> </button><div id="topbar-title"> Post</div><button type="button" id="search-trigger" class="btn btn-link" aria-label="Search"> <i class="fas fa-search fa-fw"></i> </button> <search id="search" class="align-items-center ms-3 ms-lg-0"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..." > </search> <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">Cancel</button></div></header><div class="row flex-grow-1"><main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4"><article class="px-1" data-toc="true"><header><h1 data-toc-skip>Writing an Overlayed DTS</h1><div class="post-meta text-muted"> <span> Posted <time data-ts="1632162600" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Sep 21, 2021 </time> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://x.com/danascape">Saalim Quadri</a> </em> </span><div> <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="1164 words" > <em>6 min</em> read</span></div></div></div></header><div id="toc-bar" class="d-flex align-items-center justify-content-between invisible"> <span class="label text-truncate">Writing an Overlayed DTS</span> <button type="button" class="toc-trigger btn me-1"> <i class="fa-solid fa-list-ul fa-fw"></i> </button></div><button id="toc-solo-trigger" type="button" class="toc-trigger btn btn-outline-secondary btn-sm"> <span class="label ps-2 pe-1">Contents</span> <i class="fa-solid fa-angle-right fa-fw"></i> </button> <dialog id="toc-popup" class="p-0"><div class="header d-flex flex-row align-items-center justify-content-between"><div class="label text-truncate py-2 ms-4">Writing an Overlayed DTS</div><button id="toc-popup-close" type="button" class="btn mx-1 my-1 opacity-75"> <i class="fas fa-close"></i> </button></div><div id="toc-popup-content" class="px-4 py-3 pb-4"></div></dialog><div class="content"><p>Overlayed device trees are written in order to avoid changing the base device tree structures already present in the kernel source, and just get them overridden during compilation. Learn how to create them!</p><p><a href="/assets/images/posts/overlayed-dtsi/overlayed_title.png" class="popup img-link shimmer"><img src="/assets/images/posts/overlayed-dtsi/overlayed_title.png" alt="" loading="lazy"></a></p><h2 id="basics"><span class="me-2">Basics</span><a href="#basics" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>A device tree is a data structure for describing hardware.</p><p>Overlayed device trees are written in order to avoid changing the base device tree structures already present in the kernel source, and just get them overridden during compilation.</p><p>This will involve modifying OEM device trees from their import commit to a fully overlayed device tree; as an example, from <a href="https://github.com/stormbreaker-project/linux-asus-x01ad/commit/d4fd8d9a664672056e4b68a31da298a4d4bc79ac">this</a> to <a href="https://github.com/stormbreaker-project/linux-asus-x01ad/commit/85b3cb884acf30831a4185327a19a2c4268e457a">this</a>.</p><h2 id="steps"><span class="me-2">Steps</span><a href="#steps" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h3 id="1-find-the-initial-device-tree-import-for-your-device"><span class="me-2">1. Find the initial device tree import for your device</span><a href="#1-find-the-initial-device-tree-import-for-your-device" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>For example, in my case on the device Asus X01AD (sdm632), they were added in <a href="https://github.com/stormbreaker-project/linux-asus-x01ad/commit/d4fd8d9a664672056e4b68a31da298a4d4bc79ac">this</a> commit.</p><p>As you can see, most changes are additions done by the OEM.</p><p>Now, grab a dmesg from the stock kernel, and find the name of the DTB that your stock kernel uses. We will need it to create our initial base device tree.</p><p>You will find something like this in your dmesg (<em>start the dmesg from 0’th second</em>).</p><p><code class="language-plaintext highlighter-rouge">Machine: Qualcomm Technologies, Inc. SDM632 PMI632 QRD SKU3</code></p><p>which implies our bootloader loads the dtb which points out to <code class="language-plaintext highlighter-rouge">SDM632 PMI632 QRD SKU3</code> Board Name.</p><h3 id="2-make-a-clean-base-of-your-kernel-which-just-boots"><span class="me-2">2. Make a clean base of your kernel which just boots</span><a href="#2-make-a-clean-base-of-your-kernel-which-just-boots" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>For a clean kernel base, we add only the required changes on top of a base CAF (Code Aurora Forum) or ALS (Android Linux Stable) kernel source, which is enough to boot our device.</p><p>This minimal change-set differs from device to device, some devices might just boot on dts (device tree structure) imports but some devices might need additional changes in power or video drivers, and hence we must add all these as per requirement.</p><p>Before proceeding to write overlayed dts, I will consider that you have succeeded in booting your devices over a clean CAF or ALS base with minimal changes.</p><p>As an example, my <code class="language-plaintext highlighter-rouge">Asus X01AD</code> took quite a few changes to boot; you can look into it <a href="https://github.com/stormbreaker-project/linux-asus-x01ad/tree/423c09527a97e55cca9a9ccfca247b1b179e3ebc">here</a>.</p><h3 id="3-get-to-know-the-device-tree"><span class="me-2">3. Get to know the device tree</span><a href="#3-get-to-know-the-device-tree" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Now stalk (well, research or learn about) your dtsi imports so that you can know what the OEM changed over the base source – the additions and deletions, addition of new panels and battery data, and so on.</p><h3 id="4-create-your-dts-file"><span class="me-2">4. Create your DTS file</span><a href="#4-create-your-dts-file" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Every device boots only on a single DTSI which points to the correct board name. In my case, it pointed to <code class="language-plaintext highlighter-rouge">SDM632 PMI632 QRD SKU3</code> as we saw in point 1, and I found <code class="language-plaintext highlighter-rouge">model = "Qualcomm Technologies, Inc. SDM632 + PMI632 SOC";</code> in <code class="language-plaintext highlighter-rouge">sdm632.dts</code>.</p><p>As per my convenience, I named it <code class="language-plaintext highlighter-rouge">sdm632-X01AD.dts</code> – you can choose whatever name you want. This will be the DTS which includes other overlayed DTS.</p><h3 id="5-make-our-kernel-build-our-new-dts"><span class="me-2">5. Make our kernel build our new DTS</span><a href="#5-make-our-kernel-build-our-new-dts" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>You need to include the DTS in the <code class="language-plaintext highlighter-rouge">Makefile</code> of the <code class="language-plaintext highlighter-rouge">dts</code> directory – <code class="language-plaintext highlighter-rouge">arch/arm64/boot/dts/qcom/Makefile</code>, under the correct architecture name, <code class="language-plaintext highlighter-rouge">ARCH_SDM632</code> in this case.</p><p>You can call our DTS by inserting your <code class="language-plaintext highlighter-rouge">dtsname.dtb</code> under <code class="language-plaintext highlighter-rouge">architecture</code>, as seen in <a href="https://github.com/stormbreaker-project/linux-asus-x01ad/commit/85b3cb884acf30831a4185327a19a2c4268e457a#diff-6ef2edc037b112b898a8ae8cf2e368a6cbc75dda5cc8a5dc9be6b1146ca4569dR10">this</a> commit. This is a bit different because I added guards in the <code class="language-plaintext highlighter-rouge">Makefile</code> to make sure only one DTB for my device is built, since it takes up space for no reason if the ones not needed are built too.</p><h3 id="6-organising-the-dts"><span class="me-2">6. Organising the DTS</span><a href="#6-organising-the-dts" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>You can now create a directory to organise the various DTS files if you want to (I called it <code class="language-plaintext highlighter-rouge">X01AD</code>). You can also create sub-directories if you want, mainly to divide display panel DTS or the battery data DTS and so on, this is all upto you.</p><h3 id="7-identifying-the-dsi-panel-and-battery-data-dtsis"><span class="me-2">7. Identifying the DSI panel and battery data DTSIs</span><a href="#7-identifying-the-dsi-panel-and-battery-data-dtsis" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>This step is for those who cannot recognise which dtsi are for DSI (Device Serial Interface) panels or battery data.</p><p>To find them, you can check names of DTSIs in your OEM import. This works in most cases. Display panel DTSI will look like <code class="language-plaintext highlighter-rouge">dsi-panel-"name-of-driver"-"resolution"-video.dtsi</code>.</p><p>Battery data DTSIs are different as per devices, so we will find them accordingly.</p><p>In my case, I found <code class="language-plaintext highlighter-rouge">dsi-panel-ili9881h-720p-video.dtsi</code> for display and <code class="language-plaintext highlighter-rouge">Huaqin_QL1830scud_4000mAh_averaged_MasterSlave_Sept25th2018_PMI632.dtsi</code> for battery data.</p><h3 id="8-creating-the-base-dtsi"><span class="me-2">8. Creating the base DTSI</span><a href="#8-creating-the-base-dtsi" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>You now need to create a base DTSI in your custom directory and include it at the end of the <code class="language-plaintext highlighter-rouge">.dts</code> file we created in point 4.</p><p>You can include it as <code class="language-plaintext highlighter-rouge">#include "your-custom-directory/base.dtsi"</code>.</p><p>My base dtsi is <code class="language-plaintext highlighter-rouge">X01AD-base.dtsi</code> and is included in <a href="https://github.com/stormbreaker-project/linux-asus-x01ad/commit/85b3cb884acf30831a4185327a19a2c4268e457a#diff-abc3be0451bc6bc9e957cd04db3f9bae2b34fbe57cd748e53adb8404d2aa57d2R31">this</a> commit.</p><p>Note that the base dtsi is created to bind up includes in a directory – it’s upto you if you want to include other DTSIs from your base DTS or use my way, they’re both fine.</p><h3 id="9-verifying-our-dtb-builds"><span class="me-2">9. Verifying our DTB builds</span><a href="#9-verifying-our-dtb-builds" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>You can try to build your kernel and check if it goes fine. You can skip this step if you’re confident about your work, it’s just to confirm if our includes are correct.</p><p>In my case, I found my DTB built in <code class="language-plaintext highlighter-rouge">out/arch/arm64/boot/dts</code>.</p><p>Now – this might be discouraging, but we’ve just begun; up until now, we haven’t finished 10% of the work. Battery data and DSI panel changes are just additions, so that’s the easiest part.</p><h3 id="10-checking-out-the-changes-in-dtsi-import-commit"><span class="me-2">10. Checking out the changes in DTSI import commit</span><a href="#10-checking-out-the-changes-in-dtsi-import-commit" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>For example, let’s take <code class="language-plaintext highlighter-rouge">msm8953.dtsi</code> as per <a href="https://github.com/stormbreaker-project/linux-asus-x01ad/commit/d4fd8d9a664672056e4b68a31da298a4d4bc79ac#diff-e8966e9b69f2736b98f83b94f0850b361f5c3c01b12d71ec162dbefc02d732bdR72">this</a> commit.</p><p>Create a similar DTSI in your desired overlayed directory. This will make it easy for you and others to recall. In my case, it was <code class="language-plaintext highlighter-rouge">X01AD-msm8953.dtsi</code>.</p><p>Now include this in your base overlay DTS or DTSI that you created in your device directory.</p><h3 id="11-bringing-in-changes"><span class="me-2">11. Bringing in changes</span><a href="#11-bringing-in-changes" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Check the syntax in your OEM DTSI.</p><p>In my case, the DTSI starts with <code class="language-plaintext highlighter-rouge">/ {</code>.</p><p>DTSIs can start with braces (as you saw above) or nodes – <code class="language-plaintext highlighter-rouge">&amp;node</code>.</p><p>Now, let’s have a look at another example.</p><p>In this <a href="https://github.com/stormbreaker-project/linux-asus-x01ad/commit/d4fd8d9a664672056e4b68a31da298a4d4bc79ac#diff-e8966e9b69f2736b98f83b94f0850b361f5c3c01b12d71ec162dbefc02d732bdR72">line</a>, the address of the <code class="language-plaintext highlighter-rouge">other_ext</code> region has been changed.</p><p>In order to write that in our overlayed DTSI, write a new dtsi with <code class="language-plaintext highlighter-rouge">/ {</code>, and follow up till that address, the <code class="language-plaintext highlighter-rouge">other_ext_region</code>.</p><p>There’s no need to include other regions, adresses, or nodes, since our OEM has not modified them, leaving them as-is to be included from the base DTSI.</p><p>This is an important step, since if it goes wrong, you will end up with weird cryptic errors from <code class="language-plaintext highlighter-rouge">dtc</code>. Our purpose can be to add, remove, or overwrite nodes, or to change regions, or add or remove properties.</p><p>If you understood the above your dtsi should look as such:</p><pre><code class="language-C">/ {
    reserved-memory {
        other_ext_mem: other_ext_region@0 {
</code></pre><p>It’s now time to write our updated property:</p><p><code class="language-plaintext highlighter-rouge">reg = &lt;0x0 0x84a00000 0x0 0x1e00000&gt;;</code></p><p>And now we just close the curly braces as per the syntax:</p><pre><code class="language-C">/ {
    reserved-memory {
        other_ext_mem: other_ext_region@0 {
            reg = &lt;0x0 0x84a00000 0x0 0x1e00000&gt;;
        };
    };
};
</code></pre><p>There you go – you just made the same OEM changes overlayed in a new DTSI which will now be overridden onto the base DTSI during compilation.</p><p>Other changes will also involve the same process, and you might need to delete nodes or properties as such:</p><p><code class="language-plaintext highlighter-rouge">/delete-property/ property-name;</code></p><p><code class="language-plaintext highlighter-rouge">/delete-node/ node-name;</code></p><p>Here’s an <a href="https://github.com/stormbreaker-project/linux-asus-x01ad/commit/85b3cb884acf30831a4185327a19a2c4268e457a#diff-c7c6dacf6c6f713797447bf43699cfa3563f0a325f7261d7b35a64e263537db8R39">example</a>.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw me-1"></i> <a href="/categories/linux-kernel/">Linux Kernel</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw me-1"></i> <a href="/tags/linux/" class="post-tag no-text-decoration" >Linux</a> <a href="/tags/kernel/" class="post-tag no-text-decoration" >Kernel</a> <a href="/tags/linux-kernel/" class="post-tag no-text-decoration" >Linux Kernel</a> <a href="/tags/dts/" class="post-tag no-text-decoration" >DTS</a></div><div class=" post-tail-bottom d-flex justify-content-between align-items-center mt-5 pb-2 " ><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper d-flex align-items-center"> <span class="share-label text-muted">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Writing%20an%20Overlayed%20DTS%20-%20squadri&url=https%3A%2F%2Fdanascape.github.io%2Fposts%2FWriting-an-Overlayed-DTS%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" aria-label="Twitter"> <i class="fa-fw fa-brands fa-square-x-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Writing%20an%20Overlayed%20DTS%20-%20squadri&u=https%3A%2F%2Fdanascape.github.io%2Fposts%2FWriting-an-Overlayed-DTS%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fdanascape.github.io%2Fposts%2FWriting-an-Overlayed-DTS%2F&text=Writing%20an%20Overlayed%20DTS%20-%20squadri" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Telegram" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <button id="copy-link" aria-label="Copy link" class="btn small" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy link" data-title-succeed="Link copied successfully!" > <i class="fa-fw fas fa-link pe-none fs-6"></i> </button> </span></div></div></div></article></main><aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 text-muted"><div class="access"><section id="access-lastmod"><h2 class="panel-heading">Recently Updated</h2><ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2"><li class="text-truncate lh-lg"> <a href="/posts/GSoC-2025-Journey/">GSoC 2025 - Journey</a><li class="text-truncate lh-lg"> <a href="/posts/GSoC-2025-week6/">GSoC 2025 - Week 6 - Final Build Patchset</a><li class="text-truncate lh-lg"> <a href="/posts/GSoC-2025-week7-8-9-10/">GSoC 2025 - Week 7,8,9,10 - Unexpected Hardware Issue</a><li class="text-truncate lh-lg"> <a href="/posts/GSoC-2025-week5/">GSoC 2025 - Week 5 - Testing the patchset</a><li class="text-truncate lh-lg"> <a href="/posts/GSoC-2025-week3/">GSoC 2025 - Week 3 - Starting to Code</a></ul></section><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/lfx/">LFX</a> <a class="post-tag btn btn-outline-primary" href="/tags/agl/">AGL</a> <a class="post-tag btn btn-outline-primary" href="/tags/gsoc/">GSoC</a> <a class="post-tag btn btn-outline-primary" href="/tags/lf/">LF</a> <a class="post-tag btn btn-outline-primary" href="/tags/raspberrypi/">RaspberryPI</a> <a class="post-tag btn btn-outline-primary" href="/tags/yocto/">Yocto</a> <a class="post-tag btn btn-outline-primary" href="/tags/android/">Android</a> <a class="post-tag btn btn-outline-primary" href="/tags/aosp/">AOSP</a> <a class="post-tag btn btn-outline-primary" href="/tags/kernel/">Kernel</a> <a class="post-tag btn btn-outline-primary" href="/tags/linux-kernel/">Linux Kernel</a></div></section></div><div class="toc-border-cover z-3"></div><section id="toc-wrapper" class="invisible position-sticky ps-0 pe-4 pb-4"><h2 class="panel-heading ps-3 pb-2 mb-0">Contents</h2><nav id="toc"></nav></section></aside></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4"><aside id="related-posts" aria-labelledby="related-label"><h3 class="mb-4" id="related-label">Further Reading</h3><nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4"><article class="col"> <a href="/posts/Using-AOSP-Kernel-Build/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1723573800" data-df="ll" > Aug 14, 2024 </time><h4 class="pt-0 my-2">Using AOSP Kernel Build</h4><div class="text-muted"><p>In my previous blog, we talked about how to cross-compile Android Kernel, but there is another official way that ODMs use to compile their kernel sources, via AOSP Kernel Build. ![](/assets/images...</p></div></div></a></article><article class="col"> <a href="/posts/Cross-Compiling-Android-Linux-Kernel/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1721759400" data-df="ll" > Jul 24, 2024 </time><h4 class="pt-0 my-2">Cross-Compiling Android Linux Kernel</h4><div class="text-muted"><p>When you use your Android device, you're interacting with a complex system that relies heavily on the Linux kernel at its core. But what exactly is the Android Linux kernel, and how does it work? ...</p></div></div></a></article><article class="col"> <a href="/posts/LFX-Mentorship-for-Linux-Kernel-Bug-Fixing/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1690396200" data-df="ll" > Jul 27, 2023 </time><h4 class="pt-0 my-2">LFX Mentorship for Linux Kernel Bug Fixing</h4><div class="text-muted"><p>Learn more about the Linux Foundation Mentorship programme, and hear from someone who went through the process. ![](/assets/images/posts/lfx/lfx_logo.png) ## What is LFX mentorship? *"The Linux F...</p></div></div></a></article></nav></aside><nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation"><div class="btn btn-outline-primary disabled" aria-label="Older"><p>-</p></div><a href="/posts/Android-Device-Tree-Bringup/" class="btn btn-outline-primary" aria-label="Newer" ><p>Android Device Tree Bringup</p></a></nav><footer aria-label="Site Info" class=" d-flex flex-column justify-content-center text-muted flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3 " ><p>© <time>2025</time> <a href="https://x.com/danascape">Saalim Quadri</a>. <span data-bs-toggle="tooltip" data-bs-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author." >Some rights reserved.</span></p><p>Using the <a data-bs-toggle="tooltip" data-bs-placement="top" title="v7.3.1" href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener" >Chirpy</a> theme for <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a>.</p></footer></div></div><div id="search-result-wrapper" class="d-flex justify-content-center d-none"><div class="col-11 content"><div id="search-hints"><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/lfx/">LFX</a> <a class="post-tag btn btn-outline-primary" href="/tags/agl/">AGL</a> <a class="post-tag btn btn-outline-primary" href="/tags/gsoc/">GSoC</a> <a class="post-tag btn btn-outline-primary" href="/tags/lf/">LF</a> <a class="post-tag btn btn-outline-primary" href="/tags/raspberrypi/">RaspberryPI</a> <a class="post-tag btn btn-outline-primary" href="/tags/yocto/">Yocto</a> <a class="post-tag btn btn-outline-primary" href="/tags/android/">Android</a> <a class="post-tag btn btn-outline-primary" href="/tags/aosp/">AOSP</a> <a class="post-tag btn btn-outline-primary" href="/tags/kernel/">Kernel</a> <a class="post-tag btn btn-outline-primary" href="/tags/linux-kernel/">Linux Kernel</a></div></section></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><aside aria-label="Scroll to Top"> <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow"> <i class="fas fa-angle-up"></i> </button></aside></div><div id="mask" class="d-none position-fixed w-100 h-100 z-1"></div><aside id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-bs-animation="true" data-bs-autohide="false" ><div class="toast-header"> <button type="button" class="btn-close ms-auto" data-bs-dismiss="toast" aria-label="Close" ></button></div><div class="toast-body text-center pt-0"><p class="px-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></aside><script> var disqus_config = function () { this.page.url = 'https://danascape.github.io/posts/Writing-an-Overlayed-DTS/'; this.page.identifier = '/posts/Writing-an-Overlayed-DTS/'; }; function addDisqus() { let disqusThread = document.createElement('div'); let paragraph = document.createElement('p'); disqusThread.id = 'disqus_thread'; paragraph.className = 'text-center text-muted small'; paragraph.innerHTML = 'Comments powered by <a href="https://disqus.com/">Disqus</a>.'; disqusThread.appendChild(paragraph); const footer = document.querySelector('footer'); footer.insertAdjacentElement("beforebegin", disqusThread); }function reloadDisqus(event) { if (event.source === window && event.data && event.data.id === Theme.ID) {if (typeof DISQUS === 'undefined') { return; } if (document.readyState == 'complete') { DISQUS.reset({ reload: true, config: disqus_config }); } } } addDisqus(); if (Theme.switchable) { addEventListener('message', reloadDisqus); }var disqusObserver = new IntersectionObserver( function (entries) { if (entries[0].isIntersecting) { var d = document, s = d.createElement('script'); s.src = 'https://squadri.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); disqusObserver.disconnect(); } }, { threshold: [0] } ); disqusObserver.observe(document.getElementById('disqus_thread')); </script> <script> document.addEventListener('DOMContentLoaded', () => { SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<article class="px-1 px-sm-2 px-lg-4 px-xl-0"><header><h2><a href="{url}">{title}</a></h2><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div></header><p>{content}</p></article>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); }); </script>
